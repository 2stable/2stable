<!DOCTYPE html><html lang="en" data-bs-theme="auto"><head><meta charset="UTF-8"><link type="application/atom+xml" rel="alternate" href="https://2stable.com/feed.xml" title="2Stable"><!-- Begin Jekyll SEO tag v2.8.0 --><title>How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups. | 2Stable</title><meta name="generator" content="Jekyll v4.3.3"><meta property="og:title" content="How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups."><meta name="author" content="c128128"><meta property="og:locale" content="en_US"><meta name="description" content="In my last article, I talked about how Password Manager by 2Stable keeps your sensitive data secure. If you missed it, you can catch up here. Now, let’s discuss another feature: Shared Groups."><meta property="og:description" content="In my last article, I talked about how Password Manager by 2Stable keeps your sensitive data secure. If you missed it, you can catch up here. Now, let’s discuss another feature: Shared Groups."><link rel="canonical" href="https://2stable.com/blog/password-manager/the-shared-groups/"><meta property="og:url" content="https://2stable.com/blog/password-manager/the-shared-groups/"><meta property="og:site_name" content="2Stable"><meta property="og:image" content="https://2stable.com/assets/img/blog/password-manager/the-shared-groups.jpg"><meta property="og:image:alt" content="How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups."><meta property="og:type" content="article"><meta property="article:published_time" content="2024-03-16T09:05:00+01:00"><meta name="twitter:card" content="summary_large_image"><meta property="twitter:image" content="https://2stable.com/assets/img/blog/password-manager/the-shared-groups.jpg"><meta name="twitter:image:alt" content="How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups."><meta property="twitter:title" content="How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups."><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"c128128"},"dateModified":"2024-05-28T18:39:41+02:00","datePublished":"2024-03-16T09:05:00+01:00","description":"In my last article, I talked about how Password Manager by 2Stable keeps your sensitive data secure. If you missed it, you can catch up here. Now, let’s discuss another feature: Shared Groups.","headline":"How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups.","image":{"alt":"How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups.","url":"https://2stable.com/assets/img/blog/password-manager/the-shared-groups.jpg","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://2stable.com/blog/password-manager/the-shared-groups/"},"url":"https://2stable.com/blog/password-manager/the-shared-groups/"}</script><!-- End Jekyll SEO tag --><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#fff"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/assets/img/favicon/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><!-- bootstrap-css-only --><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"><!-- bootstrap-icons  --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"><!-- shared-css --><link rel="stylesheet" href="/shared/assets/css/shared.css"><!-- local-css --><!-- <link rel="stylesheet" href="/local.css"> --><!-- splitbee --><script async src="https://cdn.splitbee.io/sb.js"></script><!-- ahref --><meta name="apple-itunes-app" content="app-id=122171064"><!-- color-theme --><!-- <script src="/shared/assets/js/color-modes.js"></script> --><link rel="stylesheet" href="/css/github-markdown-light.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script><style>.markdown-body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 980px;
    margin: 0 auto;
    padding: 45px;
  }

  @media (max-width: 767px) {
    .markdown-body {
      padding: 15px;
    }
  }</style></head><body><div class="container py-2"><header class="d-flex flex-column flex-md-row align-items-center pt-3 justify-content-between"><div class="d-flex flex-column flex-md-row align-items-center"><div class="pe-0 pe-md-2"><a class="navbar-brand me-md-auto my-0 mx-0" href="/"><img src="/assets/img/auth-Icon-512.png" width="36" height="36" class="d-inline-block align-top rounded" alt="2Stable logo"></a></div><div class="me-md-auto mx-0"><div class="pb-md-0 pb-2 pt-1 pt-md-0 mb-0 small lh-sm w-100 text-center text-md-start"><a href="/"><strong class="fw-semibold fs-5 text-dark">2Stable</strong></a> <a href="https://2stable.com/" target="_blank" rel="noopener"><span class="d-block small text-dark">by <img src="/shared/assets/img/2Stable-Logo.svg" height="16" alt="2Stable Logo"></span></a></div></div></div><nav class="nav my-2 my-md-0 gap-2"><a class="p-2 nav-hover text-body-secondary" href="/team/" rel="noopener">Team</a> <a class="p-2 nav-hover text-body-secondary" href="/contact/" rel="noopener">Contact</a></nav></header></div><main id="content" class="container markdown-body py-0"><div class="row justify-content-center pb-4"><div><img class="w-100 rounded" src="/assets/img/blog/password-manager/the-shared-groups.jpg" alt="How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups." title="How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups."></div><nav aria-label="breadcrumb"><ul class="breadcrumb mt-4 p-0"><li class="breadcrumb-item"><a href="/blog/">All</a></li><li class="breadcrumb-item m-0"><a href="/blog/password-manager/">Password Manager</a></li><li class="breadcrumb-item active m-0" aria-current="page">How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups.</li></ul></nav><h1 class="text-body-emphasis">How does Password Manager by 2Stable work under the hood? Part 3, The Shared Groups.</h1><div class="d-flex flex-column flex-md-row justify-content-between"><div class="d-flex align-items-center"><img class="rounded-circle my-2 me-2" width="44" src="https://pbs.twimg.com/profile_images/1678750625482285056/kW9fX0Pw_400x400.jpg" alt="Alex Vera author picture"><div class="w-100"><p class="mb-0"><span class="small text-body-secondary">by </span><a href="https://twitter.com/c128128" target="_blank" rel="noopener">Alex Vera</a></p><span class="d-block small">Founder & CEO</span></div></div><p class="d-flex align-items-center mb-0 gap-2 pt-3 small"><span class="text-body-secondary">28 May 2024</span> <span>·</span> <span class="text-body-secondary">7 minutes to read</span></p></div></div><div class="justify-content-center text-body-emphasis"><p>In my last article, I talked about how <strong>Password Manager by 2Stable</strong> keeps your sensitive data secure. If you missed it, you can catch up <object><a href="https://2stable.com/blog/all/password-manager/the-storage/">here</a></object>.</p><p>Now, let’s discuss another feature: <code class="language-plaintext highlighter-rouge">Shared Groups</code>.<!--more--></p><p><code class="language-plaintext highlighter-rouge">Shared Groups</code> are useful when you need to share passwords, notes, or files safely with others, such as your family or team. It enables everyone to collaborate without concerns about security. Let’s see how <strong>Password Manager by 2Stable</strong> simplifies and secures this process for everyone involved.</p><p>When starting a <strong>Shared Group</strong>, it all begins on one members’s device, as we talked about before with a <code class="language-plaintext highlighter-rouge">GEK</code> (<code class="language-plaintext highlighter-rouge">Group Encryption Key</code>). Next up, we need to invite others to join this group. To understand this better, let’s take a closer look at how CloudKit handles sharing.</p><p>In <code class="language-plaintext highlighter-rouge">CloudKit</code>, sharing a <code class="language-plaintext highlighter-rouge">Zone</code> with other members typically requires their email, phone number, or what’s known as a <code class="language-plaintext highlighter-rouge">CloudKitUserID</code>. However, it’s important to note that we intentionally avoid using any information that could compromise your privacy. That’s why we rely on your <code class="language-plaintext highlighter-rouge">CloudKitUserID</code>, which is unique for every app installed on Apple devices. After you have the member’s <code class="language-plaintext highlighter-rouge">CloudKitUserID</code>, you can share a <strong>Zone</strong> with them. At this point, it’s better to say that you can invite them to join the shared zone because they also need to accept a special link generated by <code class="language-plaintext highlighter-rouge">CloudKit</code>.</p><p>Ok, now that we have a basic understanding of the process, let’s move on. How can we obtain the <code class="language-plaintext highlighter-rouge">CloudKitUserID</code>, and how do we share this specially generated link to accept the invitation?</p><p>To start, we need:</p><ol><li>The member’s <code class="language-plaintext highlighter-rouge">CloudKitUserID</code> to invite them.</li><li>To send a special link to the person we’re inviting so they can join.</li></ol><p>To get the <code class="language-plaintext highlighter-rouge">CloudKitUserID</code>, we use a method on the device of the person we want to invite. After that, we need to transfer this ID to the admin’s device, so the admin can set up the invitation.</p><p>We’ve implemented a solution using a QR code for this process.</p><p>To add someone to a <code class="language-plaintext highlighter-rouge">Shared Group</code>, you need to scan or import their Profile QR code. This QR code is located in the <code class="language-plaintext highlighter-rouge">Settings</code> -&gt; <code class="language-plaintext highlighter-rouge">My Profile</code> section of the <strong>Password Manager by 2Stable</strong> app. The Profile QR Code contains just the right amount of crucial information needed to securely incorporate a new member into the group.</p><p>Pseudocode:</p><div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">QRCode</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">cloudKitUserID</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">publicKey</span><span class="p">:</span> <span class="kt">Data</span>
<span class="p">}</span>
</code></pre></div></div><p>That’s it. We need the member’s <code class="language-plaintext highlighter-rouge">CloudKitUserID</code> to create our invitation, as discussed previously. The <code class="language-plaintext highlighter-rouge">name</code> is used to make the process more user-friendly; you can choose any name you want, and it will appear to the admin when they scan your QR code. The <code class="language-plaintext highlighter-rouge">publicKey</code> is quite interesting; let’s discuss it further below.</p><p>Remember, we must send a special link? This link is what the new member clicks to join. We could have used a different method to send this link back, like a new QR code, or we could ask the admin to email it, like you see in the <code class="language-plaintext highlighter-rouge">Notes app</code> or <code class="language-plaintext highlighter-rouge">Reminders app</code>. But we decided not to do that. Still, we need to keep the process secure. That’s where the <code class="language-plaintext highlighter-rouge">publicKey</code> comes in.</p><p>Right here, we need to talk about something called an <code class="language-plaintext highlighter-rouge">Invitation</code> struct. We make this on the admin’s device. It includes the group’s <code class="language-plaintext highlighter-rouge">GEK</code>, the link we talked about before, and a few other things like the group’s name and icon. This <code class="language-plaintext highlighter-rouge">Invitation</code> is key to making sure everything a new member needs to join is in one place.</p><p>For sending the <code class="language-plaintext highlighter-rouge">Invitation</code> back, we’ve set up a special communication channel using <code class="language-plaintext highlighter-rouge">Firebase</code>. This works through a technique called <code class="language-plaintext highlighter-rouge">PubSub</code>, where every member subscribes to a channel, allowing others to send data to that channel. To ensure security, each user generates a <code class="language-plaintext highlighter-rouge">Profile</code> struct when they first create their <code class="language-plaintext highlighter-rouge">VaultStorage</code> (as discussed in the previous article). It’s important to note that although we call it a <code class="language-plaintext highlighter-rouge">Profile</code>, it’s actually just an asymmetric key pair, accompanied by an icon and a chosen name.</p><blockquote><p>To send the invitation link safely, we use a special kind of protection called asymmetric encryption. When someone creates their <code class="language-plaintext highlighter-rouge">Profile</code>, they get two keys: one is public, and the other is private. We encrypt, or lock, the invitation with the recipient’s public key. This means only their private key can unlock and read the invitation. This way, the invitation stays safe while it’s sent over the internet, and only the person being invited can open it. This method helps keep everything secure, even us at <strong>2Stable</strong> can’t read that invitation, the use of asymmetric encryption ensures that only the intended recipient, with their private key, can unlock and read the invitation.</p></blockquote><p>Despite using asymmetric encryption, it’s important to mention that we’ve developed a special login mechanism to authorize access to <code class="language-plaintext highlighter-rouge">Firebase</code>. This is to prevent someone from flooding a channel with unnecessary data. Every time a user logs into <code class="language-plaintext highlighter-rouge">Firebase</code>, which happens when they open the app, they sign a <code class="language-plaintext highlighter-rouge">challenge</code> generated on <code class="language-plaintext highlighter-rouge">Firebase</code> with their <code class="language-plaintext highlighter-rouge">PrivateKey</code>. This signature is then verified on the server with the respective <code class="language-plaintext highlighter-rouge">PublicKey</code>. This ensures that the server can trust the user really possesses the correct <code class="language-plaintext highlighter-rouge">PrivateKey</code>. This verification process, enabled by the principles of asymmetric cryptography, adds an extra layer of security by confirming user identity and permissions.</p><p>Now, we have the <code class="language-plaintext highlighter-rouge">Invitation</code> and the <code class="language-plaintext highlighter-rouge">PubSub</code> channel to send the encrypted invitation to the member.</p><p>Once the invitation is sent, the invited member receives it through the <code class="language-plaintext highlighter-rouge">PubSub</code> channel. Since the invitation is encrypted using asymmetric encryption, only the intended recipient, with their private key, can unlock and read it. This ensures that the invitation remains secure even while transmitted over the internet.</p><p>When the invited member’s device receives the invitation, it decrypts the message using their private key. This uncovers the <code class="language-plaintext highlighter-rouge">CloudKit</code> link and the <code class="language-plaintext highlighter-rouge">GEK</code>. With these, the member can create a new <strong>Storage</strong> that uses the <code class="language-plaintext highlighter-rouge">GEK</code> and connects to the <code class="language-plaintext highlighter-rouge">Shared Group</code> CloudKit Zone. Also, the invitation’s metadata, like the group icon and name, gives useful details about the <code class="language-plaintext highlighter-rouge">Shared Group</code>.</p><blockquote><p>It’s important to note that the member has <code class="language-plaintext highlighter-rouge">7 days</code> to open the app and accept the invitation. If they don’t do it within this time frame, the invitation will expire, and the process will need to be started over.</p></blockquote><p>In conclusion, the <code class="language-plaintext highlighter-rouge">Shared Groups</code> feature in <strong>Password Manager by 2Stable</strong> makes it easy and safe to share important stuff with others. It keeps your info private and secure using different technologies.</p><p>With this feature, you can invite people to join your group and share things like passwords, notes, files, etc. Everything is kept safe with strong encryption, so only the right people can see it.</p><p><strong>Password Manager by 2Stable</strong> is all about making your digital life simpler and safer.</p><p>Keep an eye out for more tips and tricks about <strong>Password Manager by 2Stable</strong> in future articles.</p><p>Until then, <strong>stay safe online!</strong></p><div class="mt-4 mb-2"><p class="text-muted mb-1">Share this article:</p><div style="height: 30px;" class=""><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" rel="author" data-via="c128128 " data-hashtags="">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div></div><ul class="list-unstyled ps-0"><li><p class="text-muted mb-1">Published: <span class="small fw-bold text-body-emphasis">16 Mar 2024</span></p></li><li><p class="text-muted mb-1">Updated: <span class="small fw-bold text-body-emphasis">28 May 2024</span></p></li></ul></div></main><div class="py-1 px-2" onclick="topFunction()" id="myBtn" title="Go to top"><i class="h2 bi bi-arrow-up-short"></i></div><footer class="footer bg-footer px-2 pt-5 pt-md-5 text-white mt-5"><div class="container pt-3 pt-md-0"><div class="row pb-3"><div class="col-md-4 me-auto pb-3 pb-md-0 mb-4"><!-- <a class="d-inline-flex align-items-center mb-2 link-dark text-decoration-none" href="/" aria-label="2Stable">
            <span class="fs-5 text-white">2Stable</span>
          </a> --><div class="mb-2"><a class="navbar-brand me-md-auto my-0 mx-0" href="/"><img src="/assets/img/2Stable-Logo.svg" height="30" class="d-inline-block align-top" alt="2Stable logo"></a></div><p class="fs-6 pb-2 pb-sm-3 opacity-60">Transforming touches into digital magic.</p><ul class="list-inline d-flex flex-md-column flex-row"><li class="me-3"><a class="d-inline-flex align-items-center widget-link" href="https://twitter.com/authwidget" target="_blank" rel="noopener"><img src="/shared/assets/img/socials/twitter.com.png" class="rounded-1" width="22" height="22" alt="Authenticator App Twitter Page"> <span class="ms-2">Twitter</span></a></li><li class="me-3"><a class="d-inline-flex align-items-center widget-link" href="https://www.youtube.com/@2StableApps" target="_blank" rel="noopener"><img src="/shared/assets/img/socials/youtube.com.svg" class="rounded-1" width="22" height="22" alt="Authenticator App YouTube Page"> <span class="ms-2">YouTube</span></a></li></ul></div><div class="col-6 col-md-3 col-xl-2 mb-4"><div class="widget widget-light"><h5 class="widget-title">Company</h5><ul class="list-inline"><li><a class="widget-link" href="/team/" rel="noopener">Team</a></li><li><a class="widget-link" href="/contact/" rel="noopener">Contact</a></li></ul></div></div><div class="col-6 col-md-3 col-xl-2 mb-4"><div class="widget widget-light"><h5 class="widget-title">Resources</h5><ul class="list-inline"><li><a class="widget-link" href="/blog/" rel="noopener">Blog</a></li></ul></div></div><div class="col-md-4 col-lg-2 cmb-4"><div class="widget widget-light"><h5 class="widget-title">Products</h5><ul class="list-inline"><li><a class="widget-link" href="https://authenticator.2stable.com" rel="noopener">Authenticator App</a></li><li class="widget-link m-0"><a class="widget-link" href="https://passwords.2stable.com" rel="noopener">Password Manager <span class="badge bg-success">NEW</span></a></li><li><a class="widget-link" href="https://passkeys.2stable.com" rel="noopener">Passkeys App</a></li></ul></div></div></div><hr class="my-0 border-light"><div class="row align-items-center mt-3 pt-4 pb-3"><div class="col-md-4 order-3 order-md-3 text-md-end mb-2"><ul class="list-inline fs-sm mb-0"></ul></div><div class="col-md-4 order-1 order-md-2 text-md-center mb-2 mb-md-5"><img class="mb-2" src="/shared/assets/img/andorra-shield.svg" width="20" height="24" alt="andorra shield"><p class="m-0"><span class="text-light opacity-75">For the world, Made in Andorra.</span></p></div><div class="col-md-4 order-2 order-md-1 mb-2"><p class="m-0"><a class="nav-link-style nav-link-light text-white" href="https://2stable.com" rel="noopener">© 2Stable.</a><span class="text-light opacity-75 me-1"> All rights reserved.</span></p></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
      anchors.options = {
        placement: 'right', // Place anchor links on the right
        visible: 'hover touch',  // Always show the anchor links
        // icon: '#'          // Use the '#' symbol for the anchor icon
      };
      anchors.add('h2, h3'); // Add anchors to h2 and h3 headings
    });</script><script>hljs.highlightAll();</script><script src="/shared/assets/js/backtotop.js"></script><script src="/shared/assets/js/thanks.js"></script><script src="/shared/assets/js/anchor.js"></script></body></html>